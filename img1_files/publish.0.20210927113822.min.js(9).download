var brandhub=function(e){function n(n){for(var a,i,s=n[0],u=n[1],c=n[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(n);while(f.length)f.shift()();return o.push.apply(o,c||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],a=!0,s=1;s<t.length;s++){var u=t[s];0!==r[u]&&(a=!1)}a&&(o.splice(n--,1),e=i(i.s=t[0]))}return e}var a={},r={"components/search/publish":0},o=[];function i(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=a,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)i.d(t,a,function(n){return e[n]}.bind(null,a));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/etc/designs/brandhub/frontend/";var s=window["webpackJsonpbrandhub"]=window["webpackJsonpbrandhub"]||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var c=0;c<s.length;c++)n(s[c]);var l=u;return o.push(["d761","chunk-common"]),t()}({"0bc8":function(e,n,t){},"0e51":function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return i})),t.d(n,"e",(function(){return s})),t.d(n,"c",(function(){return u})),t.d(n,"f",(function(){return c})),t.d(n,"d",(function(){return l})),t.d(n,"g",(function(){return f}));var a=t("276c"),r=t("e954"),o="click",i="form",s="form started",u="form engaged",c="form submitted",l="form failed",d=null,f=function(){function e(){Object(a["a"])(this,e)}return Object(r["a"])(e,[{key:"pushToDataLayer",value:function(e){window.dataLayer_dag=window.dataLayer_dag||[],window.dataLayer_dag.push(e)}},{key:"addClickTrackingEventData",value:function(e,n,t,a){var r={event:o,eventDetail:{category:e,action:n,label:t}};a&&(r.eventDetail.destinationUrl=a),this.pushToDataLayer(r)}},{key:"addClickTrackingFormData",value:function(e,n,t,a){var r={event:o,eventDetail:{category:e,action:n,label:t},form:{name:a}};this.pushToDataLayer(r)}}],[{key:"getInstance",value:function(){return d||(d=new e),d}}]),e}()},"784e":function(e,n,t){"use strict";var a=t("1157"),r=t.n(a);t("4c35"),t("ac1f"),t("1276"),t("498a"),t("5319"),t("6f6e");function o(){var e=r()(window).innerWidth();r()("img.lazy-loaded[data-srcset]").each((function(){var n=r()(this),t=n.attr("src");if(t&&0!==t.indexOf("data:"))for(var a=n.attr("data-srcset").split(","),o=0;o<a.length;o++){var i=a[o].trim().split(" "),s=999999;if(2===i.length&&(s=(i[1]+"").replace("w","")),e<=s){n.attr("srcset",a[o].trim());break}}}))}r()(document).ready((function(){o()})),r()(window).on("resizeend scrollend lazyload lazycomplete",(function(){o()}));t("f741");r.a.extend(r.a.lazyLoadXT,{edgeY:900,blankImage:"data:image/gif;base64,R0lGODdhAQABAIABABcXF////ywAAAAAAQABAAACAkQBADs=",updateEvent:"load orientationchange resize scroll touchmove focus brandhubParallaxScrollPos"});r.a,r.a.lazyLoadXT},d761:function(e,n,t){"use strict";t.r(n);t("e623"),t("e379"),t("5dc8"),t("37e1"),t("7db0"),t("99af"),t("ac1f"),t("841c"),t("498a"),t("5319"),t("0bc8");var a=t("1157"),r=t.n(a),o=(t("784e"),t("0e51")),i=20,s="brandhub",u="brandhubSearch",c="brandhub-menu-flyout-close",l="brandhub-main-nav-close-burger-menu",d="brandhub-main-nav__mobile-search-button--flyout-open",f="application/json",h=1e3,b=200,m=10,p={init:function(e){p.elem=e,p.initDomElements(),p.initOptions(),p.initState(),p.initTracking(),p.initSession(),p.initEvents()},initDomElements:function(){p.form=p.elem.find(".brandhub-search__form"),p.input=p.elem.find(".brandhub-search__input"),p.suggestionsList=p.elem.find(".brandhub-search__suggestions-list"),p.isFlyoutSearch=p.elem.closest(".brandhub-main-nav__flyout-container").length>0,p.mainNavMobileSearchButton=r()(".brandhub-main-nav__mobile-search-button"),p.mainNavSearchIcon=r()(".brandhub-main-nav__link-icon.brandhub-icon-search"),p.mainNavSearchFlyoutToggle=p.mainNavSearchIcon.closest(".brandhub-main-nav__toggle-flyout"),p.mainNavSearchFlyoutContainer=p.mainNavSearchIcon.closest(".brandhub-main-nav__flyout-container"),p.resultsContainer=null,p.moreButton=null,p.moreButtonContainer=null,p.resultsList=null,p.clearResultsButton=null},initOptions:function(){p.apiEndpoint=p.form[0].dataset.searchApiEndpoint,p.apiUrl=p.apiEndpoint||"https://int.api.oneweb.mercedes-benz.com/fss-core/v1",p.autoSuggestions=p.form[0].dataset.autoSuggestions,p.language="de-DE"===r()("html").attr("lang")||"de"===r()("html").attr("lang")?"de":"en",p.market="COM",p.site=p.form.attr("data-search-site")||"all",p.searchProfileIds={"en-COM":{all:"69b80914-3006-4e3f-5aef-9f66e173522e","amg-f1":"46a8ae05-9ba3-4bec-af60-946b30ae366c"},"de-COM":{all:"200b2e7e-de22-4db5-6f04-58b0f562ec61","amg-f1":"d21aacfb-429b-4d5f-ab26-9d022e452d95"}},p.searchProfileId=p.searchProfileIds["".concat(p.language,"-").concat(p.market)][p.site],p.moreText=p.form.attr("data-msg-read-more"),p.moreResultsText=p.form.attr("data-msg-show-more-results"),p.resultsText=p.form.attr("data-msg-results"),p.noResultsText=p.form.attr("data-msg-no-results"),p.errorText=p.form.attr("data-msg-error")},initState:function(){p.isScrolledToInput=!1,p.currentSearchTerm="",p.currentOffset=0,p.refreshResultsAjax=null,p.typingTimer=null},initTracking:function(){window.digitalData&&(window.digitalData.search||(window.digitalData.search={}))},initSession:function(){p.sessionToken=null,p.sessionIsVerified=!1,p.createSessionAjax=null,p.verifySessionAjax=null,p.resumeOrCreateSession()},initEvents:function(){p.bindMainNavSearchIconClickToSearchBoxInContent(),p.bindMobileSearchIconClick(),p.bindSearchFlyoutToggle(),p.elem.on("submit",(function(e){e.preventDefault(),p.onSearchTerm(p.input.val())})),p.input.on("focus",(function(){p.onFocus()})),p.input.on("focusout",(function(){setTimeout((function(){p.suggestionsList.parent().hide()}),200)})),p.input.on("keyup",(function(e){13===e.keyCode?p.onSearchTerm(p.input.val()):"true"===p.autoSuggestions&&(clearTimeout(p.typingTimer),p.input.val()&&(p.typingTimer=setTimeout(p.refreshSuggestions,b)))}))},onClick:function(e){e.preventDefault(),document.dispatchEvent(new CustomEvent(l)),document.dispatchEvent(new CustomEvent(c)),p.scrollToInput(!0)},bindMainNavSearchIconClickToSearchBoxInContent:function(){if(!p.isFlyoutSearch){if(!p.mainNavSearchIcon.length||!p.mainNavSearchFlyoutToggle.length)return;p.mainNavSearchFlyoutToggle.addClass("brandhub-main-nav__toggle-flyout--disabled"),p.mainNavSearchFlyoutToggle.on("click",(function(e){p.onClick(e)}))}},bindMobileSearchIconClick:function(){if(p.isFlyoutSearch){if(0===r()(".brandhub-search").not(p.elem).length){if(!p.mainNavSearchFlyoutToggle.length)return;p.mainNavMobileSearchButton.addClass("brandhub-main-nav__mobile-search-button--show"),p.mainNavMobileSearchButton.on("click",(function(e){e.preventDefault(),document.dispatchEvent(new CustomEvent("brandhub-main-nav-open-burger-menu")),p.mainNavSearchFlyoutContainer[0].dispatchEvent(new CustomEvent("brandhub-menu-flyout-toggle",{bubbles:!0}))}))}}else p.mainNavMobileSearchButton.addClass("brandhub-main-nav__mobile-search-button--show"),p.mainNavMobileSearchButton.on("click",(function(e){p.onClick(e)}))},bindSearchFlyoutToggle:function(){p.mainNavSearchFlyoutContainer.length&&(document.addEventListener("brandhub-menu-flyout-toggle",(function(){setTimeout((function(){p.mainNavSearchFlyoutContainer.hasClass("brandhub-main-nav__flyout-container--active")?p.mainNavMobileSearchButton.addClass(d):p.mainNavMobileSearchButton.removeClass(d)}),0)})),document.addEventListener(c,(function(){p.mainNavMobileSearchButton.removeClass(d)})))},onFocus:function(){p.verifySession(),p.suggestionsList.parent().show()},resumeOrCreateSession:function(){p.getStoredOptionsForCurrentLocale().sessionToken?p.sessionToken=p.getStoredOptionsForCurrentLocale().sessionToken:p.createSession()},verifySession:function(){p.sessionToken?p.sessionIsVerified||p.verifySessionAjax||(p.verifySessionAjax=r.a.ajax({type:"GET",url:"".concat(p.apiUrl,"/sessions/verify"),headers:{ApplicationName:s,Market:p.market,Language:p.language},data:{tokenId:"".concat(p.sessionToken)}}).done((function(){p.verifySessionAjax=null,p.sessionIsVerified=!0})).fail((function(){p.createSession()}))):p.createSession()},createSession:function(){p.createSessionAjax||(p.createSessionAjax=r.a.ajax({type:"POST",url:"".concat(p.apiUrl,"/sessions"),headers:{"Content-Type":f,Accept:f,ApplicationName:s,Market:p.market,Language:p.language},dataType:"json",data:null}).done((function(e){setTimeout((function(){p.createSessionAjax=null,e&&e.token&&(p.sessionToken=e.token,p.sessionIsVerified=!0,p.getStoredOptionsForCurrentLocale().sessionToken=p.sessionToken,p.saveStoredOptions())}),h)})))},getStoredOptions:function(){if(p.storedOptions)return p.storedOptions;if(window.localStorage){var e=window.localStorage.getItem(u);if(e)return p.storedOptions=JSON.parse(e),p.storedOptions}return p.storedOptions={},p.storedOptions},getStoredOptionsForCurrentLocale:function(){var e=p.getStoredOptions(),n="".concat(s,"_").concat(p.market,"_").concat(p.language);return n in e||(e[n]={}),e[n]},saveStoredOptions:function(){if(window.localStorage){var e=p.storedOptions||{};window.localStorage.setItem(u,JSON.stringify(e))}},refreshSuggestions:function(){if(!p.sessionToken||!p.sessionIsVerified)return p.verifySession(),void setTimeout((function(){p.refreshSuggestions()}),h+200);r.a.ajax({type:"GET",url:"".concat(p.apiUrl,"/suggestions"),headers:{"Content-Type":f,Accept:f},dataType:"json",data:{searchProfile:p.searchProfileId,query:p.normalizeQuery(p.input.val())}}).done((function(e){p.renderSuggestions(e),p.bindSuggestionsClickListener()})).fail((function(e){0}))},onSuggestionClick:function(e){var n=e.target.innerHTML;p.input.val(n),p.onSearchTerm(n)},bindSuggestionsClickListener:function(){p.suggestionsList.off("click").on("click",(function(e){p.onSuggestionClick(e)}))},renderSuggestions:function(e){p.suggestionsList.empty();for(var n=e.suggests.length>m?m:e.suggests.length,t=new DocumentFragment,a=0;a<n;a+=1){var r=document.createElement("li");r.innerHTML=e.suggests[a],r.classList+="brandhub-search__suggestion",t.appendChild(r)}p.suggestionsList.append(t)},onSearchTerm:function(e){p.suggestionsList.empty();var n=e.trim();n!==p.currentSearchTerm&&(p.currentSearchTerm=n,p.currentOffset=0,e.length<1?p.clearResults():(p.resultsContainer||p.createResultsContainer(),p.isScrolledToInput||p.scrollToInput(!1),window.digitalData&&(p.isFlyoutSearch?window.digitalData.search.searchType="flyout search":window.digitalData.search.searchType="inline search"),p.refreshResults(n)))},clearResults:function(){p.resultsContainer&&(p.resultsContainer.remove(),p.resultsContainer=null,p.resultsList=null,p.clearResultsButton=null,window.digitalData&&(window.digitalData.search.searchType="",window.digitalData.search.searchTerm="",window.digitalData.search.results="",window.digitalData.search.resultPosition="",window.digitalData.search.resultFormat=""))},refreshResults:function(e,n){if(!p.sessionToken||!p.sessionIsVerified)return p.verifySession(),void setTimeout((function(){p.refreshResults(e,n)}),h+200);window.digitalData&&(window.digitalData.search.searchterm=e),p.refreshResultsAjax=r.a.ajax({type:"GET",url:"".concat(p.apiUrl,"/results"),headers:{"Content-Type":f,Accept:f,SessionToken:p.sessionToken,ApplicationName:s},dataType:"json",data:{sp:p.searchProfileId,q:p.normalizeQuery(e),limit:i,pageOffset:p.currentOffset}}).done((function(t){p.onRefreshResults(t,e,n)})).fail((function(){p.refreshResultsAjax=null,p.renderResults(e,p.errorText,[],n)}))},onRefreshResults:function(e,n,t){p.refreshResultsAjax=null;var a=[];e.results&&(a=p.processItems(e.results));var r="".concat(p.noResultsText,' "').concat(n,'"');a.length>0&&(r="".concat(p.resultsText,' "').concat(n,'"')),window.digitalData&&(window.digitalData.search.results=a.length),p.renderResults(n,r,a,t)},processItems:function(e){var n=[];return r.a.each(e,(function(e,t){var a={title:t.resource.title,subtitle:t.resource.snippet,url:t.resource.url,display_url:t.resource.displayUrl,image_url:t.resource.thumbnail,is_video:!1,is_external:!1,external_site_name:null,fuel_consumption:t.resource.gsaFuelConsumption||null,fuel_pollution:t.resource.gsaFuelPollution||null,energy_consumption:t.resource.gsaEnergyConsumption||null};if(a.image_url||(a.image_url="/etc/designs/brandhub/frontend/static-assets/search/MB_FB_600x315.jpg"),t.domain&&"amg-f1"!==p.site&&"AMG_F1"===t.domain){a.is_external=!0;var r=a.display_url.indexOf("//");if(-1!==r){r+=2;var o=a.display_url.indexOf("/",r);-1!==o&&(a.external_site_name=a.display_url.substr(r,o-r))}}n.push(a)})),n},loadMoreResults:function(){p.currentSearchTerm&&(p.moreButton.blur().addClass("disabled"),p.currentOffset+=i,p.refreshResults(p.currentSearchTerm,!0))},renderResults:function(e,n,t,a){if(!a){p.resultsList.find(".brandhub-search__results-headline, .brandhub-search__results-item, .spacer").remove();var o=r()('<h2 class="brandhub-search__results-headline"></h2>');o.text(n),o.attr("data-search-term",e),o.appendTo(p.resultsList)}if(r.a.each(t,(function(e,n){p.renderItem(e,n,a)})),p.resultsList.find("img").lazyLoadXT(),!a&&0===t.length){var s=r()('<div class="spacer large">&nbsp;</div>');s.appendTo(p.resultsList)}t.length===i?(p.moreButtonContainer.css({display:"block"}),p.moreButton.removeClass("disabled")):p.moreButtonContainer.css({display:"none"})},renderItem:function(e,n,t){var a=r()('\n        <div class="brandhub-search__results-item">\n          <a href="'.concat(n.url,'">\n            <div class="embed-responsive embed-responsive-16by9">\n              <div class="embed-responsive-item">\n                <img data-src="').concat(n.image_url,'"/>\n              </div>\n            </div>\n            <h4>').concat(n.title||"&nbsp;","</h4>\n            <p>").concat(n.subtitle||"&nbsp;","</p>\n          </a>\n        </div>"));if(n.is_video){var o=r()(' <div class="video-icon"><div class="brandhub-icon brandhub-icon-play"></div></div>');o.insertBefore(a.find("img"))}var i=a.find("a");n.is_external&&(i.attr("target","_blank"),a.find("p").html('<i class="brandhub-icon brandhub-icon-external-link"></i>'.concat(n.external_site_name))),i.append(p.createLabeling(n));var s=e+1;!t&&e<=1?(a.addClass("w-50"),a.attr("data-result-format","prime post"),a.attr("data-result-position","prime_".concat(s))):(a.attr("data-result-format","subprime post"),a.attr("data-result-position","subprime_".concat(s))),i.attr("data-analytics-linkname",n.title.toLowerCase()),i.attr("data-analytics-linkposition","content-search-".concat(s)),i.attr("data-analytics-linkcategory","conversion"),a.appendTo(p.resultsList);var u=window,c=u.digitalData;c&&i.on("click",(function(e){c.search.resultPosition=r()(e).parent().data("result-position"),c.search.resultFormat=r()(e).parent().data("result-format")}))},createLabeling:function(e){if(e.fuel_consumption||e.fuel_pollution||e.energy_consumption){var n=r()('<div class="brandhub-search__labeling"></div>');return e.fuel_consumption&&n.append(r()('\n          <brandhub-icon\n            class="brandhub-icon brandhub-icon-fuel-comp"\n            icon="fuel-consumption"\n            width="13"\n            height="14">\n          </brandhub-icon>\n          '.concat(e.fuel_consumption,'\n          <span class="spacer small"></span>\n          <br />\n        '))),e.fuel_pollution&&n.append(r()('\n          <brandhub-icon\n            class="brandhub-icon brandhub-icon-co2"\n            icon="pollution"\n            width="15"\n            height="14">\n          </brandhub-icon>\n          '.concat(e.fuel_pollution,'\n          <span class="spacer small"></span>\n          <br />\n        '))),e.energy_consumption&&n.append(r()('\n          <brandhub-icon\n            class="brandhub-icon brandhub-icon-fuel-e-comp"\n            icon="fuel-e-comp"\n            width="12"\n            height="14">\n          </brandhub-icon>\n          '.concat(e.energy_consumption,'\n          <span class="spacer small"></span>\n        '))),n}return""},createResultsContainer:function(){p.resultsContainer=r()('\n      <div class="brandhub-search__results">\n        <div class="container">\n          <brandhub-icon\n            class="brandhub-search__clear-results-button brandhub-icon brandhub-icon-close"\n            icon="close"\n            width="17"\n            height="16">\n          </brandhub-icon>\n          <div class="brandhub-search__results-list clearfix"></div>\n          <div class="brandhub-search__more-button-container">\n            <button class="brandhub-search__more-button btn btn-dark-2 btn-small">\n              <brandhub-icon\n                class="brandhub-icon brandhub-icon-arrow-down-inline"\n                icon="chevron-down"\n                width="14"\n                height="16">\n              </brandhub-icon>\n              '.concat(p.moreResultsText,"\n            </button>\n          </div>\n        </div>\n      </div>")),p.resultsContainer.appendTo(p.elem),p.resultsList=p.resultsContainer.find(".brandhub-search__results-list"),p.moreButton=p.resultsContainer.find(".brandhub-search__more-button"),p.moreButtonContainer=p.resultsContainer.find(".brandhub-search__more-button-container"),p.clearResultsButton=p.resultsContainer.find(".brandhub-search__clear-results-button"),p.clearResultsButton.on("click",(function(){p.input.val(""),p.onSearchTerm("")})),p.resultsContainer.css({opacity:0}),p.resultsContainer.animate({opacity:1},1e3),p.moreButtonContainer.css({display:"none"}),p.moreButton.on("click",(function(){p.loadMoreResults(),o["g"].getInstance().addClickTrackingEventData("link","button-click",p.moreResultsText)}))},scrollToInput:function(e){var n=r()(".brandhub-custom-menu-bar").height()||20;p.isScrolledToInput=!0,window.removeEventListener("scroll",p.onScroll),r()("html, body").animate({scrollTop:p.input.offset().top-n},800,"swing",(function(){window.addEventListener("scroll",p.onScroll,{passive:!0})})),e&&setTimeout((function(){p.input.focus()}),1e3)},onScroll:function(){p.isScrolledToInput=!1,window.removeEventListener("scroll",p.onScroll)},normalizeQuery:function(e){var n=e;return n&&(n=n.replace(/'/g," "),n=n.replace(/"/g," ")),n}};r()(document).ready((function(){r()(".brandhub-search").each((function(e,n){var t=r()(n);p.init(t)}))}))}});
//# sourceMappingURL=publish.js.map